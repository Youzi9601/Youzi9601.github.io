import{d as C,r as w,u as E,f as F,c as u,a as c,t as d,b as o,F as T,g as $,o as p,h as R,_ as B}from"./index-CEfMbgn8.js";const V={"data-bs-spy":"scroll","data-bs-target":"#home-nav","data-bs-smooth-scroll":"true",tabindex:"0",class:"min-vh-100"},I={class:"container-xxl mb-5 px-lg-5 px-4 mt-5"},L={key:0},O={key:1},z={class:"card-body"},H={class:"d-flex"},M={class:"card-title"},N=["href"],P={class:"card-text"},U={class:"ms-auto d-flex align-items-center"},q={class:"ms-2"},G={class:"status-bar mb-3"},J=["title","data-bs-title"],K=C({__name:"StatusView",setup(Q){const g=w({}),v=w(!0),f={},{t:a}=E();F(async()=>{try{const t=await fetch("https://status-page.yoyowu9601.workers.dev/",{mode:"cors"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);g.value=await t.json();for(const r in g.value)f[r]=D(g.value[r].data)}catch(t){console.error("Error fetching status data:",t)}finally{v.value=!1}});function x(t){return(t.reduce((s,e)=>s+e.responseTime,0)/t.length).toFixed(1)}function y(t){return t==="up"?"bg-success":t==="down"?"bg-danger":t==="no-data"?"bg-secondary":"bg-warning"}function D(t){const r={};return t.forEach(s=>{const e=s.timestamp.split("T")[0];r[e]||(r[e]=[]),r[e].push(s)}),Object.entries(r).map(([s,e])=>{const m=e.some(l=>l.status==="down"),n=e.some(l=>l.status==="up"),b=m&&n?"warn":m?"down":"up",i={};e.forEach(l=>{i[l.location]||(i[l.location]=[]),i[l.location].push(l.responseTime)});const k=Object.entries(i).map(([l,_])=>({location:l,averageResponseTime:(_.reduce((S,j)=>S+j,0)/_.length).toFixed(1)})),A=(e.reduce((l,_)=>l+_.responseTime,0)/e.length).toFixed(1);return{date:s,status:b,averageResponseTimes:k,totalAverageResponseTime:A}})}function h(t){var s;const r=(s=t[t.length-1])==null?void 0:s.status;return r==="down"?"down":r==="up"?"up":"warn"}return(t,r)=>(p(),u("div",V,[c("div",I,[c("h1",null,d(o(a)("status.title")),1),v.value?(p(),u("div",L,d(o(a)("status.loading")),1)):(p(),u("div",O,[(p(!0),u(T,null,$(g.value,(s,e)=>{var m;return p(),u("div",{key:e,class:"card mb-3"},[c("div",z,[c("div",H,[c("div",null,[c("h2",M,[c("a",{href:s.url,target:"_blank"},d(s.name),9,N)]),c("p",P,d(s.description),1)]),c("div",U,[c("span",{class:R({"btn btn-outline-success":h(s.data)==="up","btn btn-outline-danger":h(s.data)==="down","btn btn-outline-warning":h(s.data)==="warn"})},d(o(a)(`status.${h(s.data).toLowerCase()}`)),3),c("span",q,d(o(a)("status.delay"))+": "+d(x(s.data))+" ms",1)])]),c("div",G,[(p(!0),u(T,null,$(Array(90-(((m=f[e])==null?void 0:m.length)||0)).fill(null).concat(f[e]||[]),(n,b)=>(p(),u("a",{key:b,class:R(["placeholder",y((n==null?void 0:n.status)||"no-data")]),style:{width:"calc((100% / 90) * 2 / 3)",marginRight:"calc((100% / 90) * 1 / 3)"},title:n?`${o(a)("status.date")}: ${n.date}
${o(a)("status.totalAverageResponseTime")}: ${n.totalAverageResponseTime} ms
`+n.averageResponseTimes.map(i=>`${o(a)("status.location")}: ${i.location}, ${o(a)("status.delay")}: ${i.averageResponseTime} ms`).join(`
`):o(a)("status.noData"),"data-bs-placement":"top","data-bs-toggle":"tooltip","data-bs-title":n?`${o(a)("status.date")}: ${n.date}
${o(a)("status.totalAverageResponseTime")}: ${n.totalAverageResponseTime} ms
`+n.averageResponseTimes.map(i=>`${o(a)("status.location")}: ${i.location}, ${o(a)("status.delay")}: ${i.averageResponseTime} ms`).join(`
`):o(a)("status.noData")},null,10,J))),128))])])])}),128))]))])]))}}),X=B(K,[["__scopeId","data-v-9e8ff140"]]);export{X as default};
