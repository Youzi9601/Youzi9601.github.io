import{d as k,r as y,u as C,e as A,o as u,c as d,a as n,t as p,b as o,F as $,g as T,h as w,_ as O}from"./index-C9iZMACS.js";const D={"data-bs-spy":"scroll","data-bs-target":"#home-nav","data-bs-smooth-scroll":"true",tabindex:"0",class:"min-vh-100"},F={class:"container-xxl mb-5 px-lg-5 px-4 mt-5"},S={key:0},B={key:1},E={class:"card-body"},M={class:"d-flex"},N={class:"card-title"},V=["href"],I={class:"card-text"},L={class:"ms-auto d-flex align-items-center"},z={class:"ms-2"},H={class:"status-bar mb-3"},P=["title","data-bs-title"],q=k({__name:"StatusView",setup(G){const h=y({}),f=y(!0),v={},{t:e}=C();A(async()=>{try{const t=await fetch("https://status-page.yoyowu9601.workers.dev/",{mode:"cors"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);h.value=await t.json();for(const m in h.value)v[m]=j(h.value[m].checks)}catch(t){console.error("Error fetching status data:",t)}finally{f.value=!1}});function R(t){return(Object.values(t).reduce((a,c)=>{const i=Object.values(c.res),s=i.reduce((r,l)=>r+l.ms,0),_=i.reduce((r,l)=>r+l.n,0);return a+s/_},0)/Object.values(t).length).toFixed(1)}function x(t){return t==="up"?"bg-success":t==="down"?"bg-danger":t==="no-data"?"bg-secondary":"bg-warning"}function j(t){return Object.entries(t).map(([m,a])=>{const c=a.fails>0?"down":"up",i=Object.entries(a.res).map(([l,g])=>({location:l,averageResponseTime:(g.ms/g.n).toFixed(1)})),s=Object.values(a.res).reduce((l,g)=>l+g.ms,0),_=Object.values(a.res).reduce((l,g)=>l+g.n,0),r=(s/_).toFixed(1);return{date:m,status:c,averageResponseTimes:i,totalAverageResponseTime:r}})}function b(t){return t.operational?"up":"down"}return(t,m)=>(u(),d("div",D,[n("div",F,[n("h1",null,p(o(e)("status.title")),1),f.value?(u(),d("div",S,p(o(e)("status.loading")),1)):(u(),d("div",B,[(u(!0),d($,null,T(h.value,(a,c)=>{var i;return u(),d("div",{key:c,class:"card mb-3"},[n("div",E,[n("div",M,[n("div",null,[n("h2",N,[n("a",{href:a.url,target:"_blank"},p(a.name),9,V)]),n("p",I,p(a.description),1)]),n("div",L,[n("span",{class:w({"btn btn-outline-success":b(a.lastCheck)==="up","btn btn-outline-danger":b(a.lastCheck)==="down"})},p(o(e)(`status.${b(a.lastCheck).toLowerCase()}`)),3),n("span",z,p(o(e)("status.delay"))+": "+p(R(a.checks))+" ms",1)])]),n("div",H,[(u(!0),d($,null,T(Array(90-(((i=v[c])==null?void 0:i.length)||0)).fill(null).concat(v[c]||[]),(s,_)=>(u(),d("a",{key:_,class:w(["placeholder",x((s==null?void 0:s.status)||"no-data")]),style:{width:"calc((100% / 90) * 2 / 3)",marginRight:"calc((100% / 90) * 1 / 3)"},title:s?`${o(e)("status.date")}: ${s.date}
${o(e)("status.totalAverageResponseTime")}: ${s.totalAverageResponseTime} ms
`+s.averageResponseTimes.map(r=>`${o(e)("status.location")}: ${r.location}, ${o(e)("status.delay")}: ${r.averageResponseTime} ms`).join(`
`):o(e)("status.noData"),"data-bs-placement":"top","data-bs-toggle":"tooltip","data-bs-title":s?`${o(e)("status.date")}: ${s.date}
${o(e)("status.totalAverageResponseTime")}: ${s.totalAverageResponseTime} ms
`+s.averageResponseTimes.map(r=>`${o(e)("status.location")}: ${r.location}, ${o(e)("status.delay")}: ${r.averageResponseTime} ms`).join(`
`):o(e)("status.noData")},null,10,P))),128))])])])}),128))]))])]))}}),K=O(q,[["__scopeId","data-v-eac9fed8"]]);export{K as default};
